{"version":3,"file":"react-scatter-board.mjs","sources":["../src/texture.js","../src/utils.js","../src/ScatterData.js","../node_modules/react-is/cjs/react-is.production.min.js","../node_modules/react-is/cjs/react-is.development.js","../node_modules/react-is/index.js","../node_modules/object-assign/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/prop-types/checkPropTypes.js","../node_modules/prop-types/factoryWithTypeCheckers.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../src/ScatterPlot.jsx","../src/ScatterWidgets.jsx","../src/ScatterBoard.jsx","../src/DashScatterBoard.jsx","../src/Lazy.jsx"],"sourcesContent":["import * as THREE from 'three'\n\n// generated according to https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript\nconst imageData = {\n  circle:\n    ',iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACtElEQVRYR+2Wz2sTQRTH5+2mNu2QbJY1Ymuym9nkInjwR/HgQRQVEf8Db9KDB0+K+CfovT0IIuKf4EVBUfSioGD1KJjdndmEEJrY1mQDadjdkZFWSkmT3aQShO5133vfz7z9znsLaMIPTFgfHQD8nx2wLOs6ABQ45/qWhxhCiBWLxRdxPRW5A/V6HXe73UdhGN7AGNclSTqWSCT+6Pm+j8IwrHqedxQAnhFCbgNALwpMJADbts8DwHNVVdV0Oo0A+qdxzlGr1ULr6+utIAiulUqlj8MghgLUarUF3/ff5vP59LBiO99Xq9W2LMsX5ufnVwblDQQol8snpqamPui6Hkt8W5Ax1uacnyWEfN8LYiAApbSZy+U0WZbjHP5vbBAEyHXdhmmaR2IDUErvzs7OPshms9MjqW8lNRqNzU6nc58QstSvzp4dYIx91TTtJMZ4HH3U6XTQ2traF13XF2IBWJYVEkJgL8dHpRI3g1IamqbZ9zv27YBt21eSyeTrubm5qDoD42q1Gur1ehcJIe93B/YFoJQ+yWQyi4qi7AvAxsaGmA+PDcO4FRlAUZTFTCYzGQDLsi7NzMy8mdgnEMfeLxOGYYgYY/FMKAAYYyuapp2a2DV0HOcOxvjhuINodXW11+127xmGsRxrDohgx3Ga+Xx+5FEs1nSlUmmappmNPYpFAqX0OELok2EYqVGug+u6nu/7p4vF4o+RALa8cAYh9E7X9VgQruv+Eus4l8t9G3kdbyeWy+Vzsiy/VFVVSaVSSJKkvjWF49vttpj9bYTQZdM0Pw/r3NAfku0CnPNDtm0vAcBNjHETAIQ3psWu8H1/k3P+0/O8w5IkPS0UCuKXLBwmLt5HBthZzHGcq0EQFADA4JwLIVeWZUYIeRVFdGfMSABxRcb2wH4KRlpG/1LwAGB3B34DBWQWMG24djEAAAAASUVORK5CYII=',\n  cross:\n    ',iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA50lEQVRYR+2XPQ6DMAyF8QZbfIYchN4spRer6D1yBcyWbKmylZI4WB0oklmdn8cnvfcAupMfOPn+7noCvPeOo2atnSRURQTy5cMwuL7vi/tijCmE8LDW3o+KEAtARIeIxX1ElIhIBSiBixNo+HxExBvngmVZXgDwrNnwOyc2dmr5PB+KiKzFiag6L+XETgDn86PhUltXygkVoAT+jwBXt7/aMITQxRinz7re1ar3vtrlADAaY3IYVet4Xdc5pTQzQbQ5X78HlIASEBPgcqLk81aDigTkw7icyHPJP0FeLxbQeiPpXAW8AUg5MTAvQNb8AAAAAElFTkSuQmCC',\n  diamond:\n    ',iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACaElEQVRYR9WXy4vTUBTG05DW2E7sI6XPlOTeUkTcqeB2QHApIrgTXIr+AbrVlW5cKbidlStFXKsrl+IsB4T23tiGtolp2pLbTh9JkQwpjNppmkyHYFaB3POdX777OidCBXwQQhdpmv5GUdRisVhchxD+CCIVCRLkxGCMv+fz+SvOu6qq+wCAq0G0AgHU6/Xb8Xh8r1gsJp2knU5nOJ1O7wMAPvqFCASAMTYEQUgzDHOUz7IsqtVq9SGEmTMHwBg/5TjuCc/z7PFkvV5vYprmCwDAMz8QvhzQNG2HEKIDAM6tSoIxnrEsmy6VSuNNIXwBYIzf8zx/h+O4lfqmaVKGYbyTJOnu1gEajca1aDT6pVKpXFgnriiKadv2riRJ+5tAbOwAxvigUChcYtk/pv6fHJPJhOp2uwcAgMtbA0AI3UskEm9yudzOJqKqqpLRaPSgWq2+9Rq/kQMIoUNRFFmapr30jr7btk01m80xhDDhFeAJgBB6mUqlHqbT6fNeYse/9/v9w8Fg8BpC+Hhd3FoAjHEhEok0RFGM+0m+HCvL8tiyLKlWq/06KX4tgCzLn7PZ7I1EwtPJlfqEEErX9U8AgJu+ATDGuwzDfBAEIRXk75cxiqIM5vP5LQjh11U6JzqAEGqWy+VKLBY7TX5qNptR7Xb7JwBA+r8AQp8Cx65QF6EDEPo2dCCcgyiZTD7KZDLrL4G/VphhGJPhcPjqVAfRUjPUo9h1wddlpGkaIYRs7zJy10N417EDEHpB4roQXknmAIRelLourCzLdV2fEkKen2lZvtyWoTYmDkTorZk7FeE1p+7htJX2/DfV7WYwLPkGlAAAAABJRU5ErkJggg==',\n  square:\n    ',iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAp0lEQVRYR+2WMQ4CIRBFWQoyFQ03YG7naqPHsNEY9XLADSjooFrD1mJixmRj8qlh/ssbij+pjc+0cb4CAAx8NBBCOGitjfCjVu/9fTRjCNDDiehKRKI1tdaWWuuemR/vIIbDU0ona+3ZOScCyDkvpZQjM18AAAMwAAMwAAMw8HcGZmPM7UeFZGbm51cG+uUY404pJa1kbRTeM0RtR9gV1+cAgIHNDbwAdNviIRMkcw0AAAAASUVORK5CYII=',\n  'triangle-down':\n    ',iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC2klEQVRYR+2WPWzTQBiGnR/iFrs4pFadpolyn09VJZAYOjDQCYmFiYVKIDHQgRWxMCAhIaSuHWCEAXWknZAQG1IHJAbEAggGcpc4bVK3Sdu0SUwSXBu5clHTpk7sJC0D3uLcfe9z730/9jGn/PhOWZ/5dwAURblgGEbiJBzx+XxZhNAPS+uvA5RSJRQK8f0GME3Tp+v6NgBAEwAh5DbHcS8lSeL6CbG2tlbVNG1GluXFJgDrRyaT+SZJ0sWBgYG+MNRqNUZV1a8AcGlfoCkJM5nMZCAQWIrH40P9IFheXq7ouj4ly/KXlgC2C4uRSOTm0FBvGXZ2dpjNzc3XAHDr4OGOlGE+nz9bq9W2ACDUSxcopbphGPz4+HjdEcD6M51OP+F5/pEoimwvIIrFYr1cLs/Ksjx7ON6xjSidTm/E4/FIMBjsikHXdWZlZWUDAMRWgZwAbrAsOz86Oip0Q6Cq6ramaXcwxm9dAdhX8VmSpMnBwUFPDJqmMcVi8VMymbx8XADHWUApnfD7/VYATyWRzWatspvEGP/0BGBtUhRlXhCEaUEQXNlQKpV+lUqlBQC462RfR9OQEGLKsuzqGiilDMa4bfy2C+zm9JDjuMeiKJ7rhKJQKJQ1TXuKEJprt74jADshV2OxWDQUcu5PjUaDyefzqwAQayd+ZBg5bSCEXGNZdmFsbOy807pcLrdVr9enMcbvewpgJ+SH4eHhKY5rPbGr1SpTKBSWAOBqJ+KuHLAWp1KpRDAY/J5MJlt+uCiKUg0EAhOJRCLXFwA7F56Fw+F74XC4qSztsnsBAA86FXftwH5gQkgDIXTG7/fvvTIMw/qY+Y0xdj1BO66Cg6cihMzwPP98ZGRk7yrW19crlUrlPsb4lZvTe3bA7g0kGo3udSdVVSlCCLsV7woglUpdYVn2nRVkd3f3OkLo44kC2GX5xjRNKx+mvYh35YBXwcP7PCVhr8T/O2A58AfGZw8wtSahoQAAAABJRU5ErkJggg==',\n  'triangle-up':\n    ',iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC3UlEQVRYR+2VP2gTURzHLyG5tOnFXD0uJsTj3u9dB4s4iIIOIk5uDnUQQdChuApOBScFh4KDg4uDOgkKKoKO4iAI4lIciiD03rtoSnOJTbzcJTmS651EraTm312a2qVvvd/v+/2873vvdyFml1dol/2ZPYBtJUApfdk+QgCYG/UoRwZQVfVULBZ77Xke02w2zymK8n4UiJEBKKU0k8mgtmmhUKAIIfzfAAgh8xzH3RVFMdE2LRaLZq1Wu44xfhgUYqQEVFVtAUAkFPrd7rouo2maoyhKdMcBCCH3eJ6fn56enuw0q1QqjWq1+gAhdC0IRKAECCFyOBxelmWZ62WSy+WsjY2Nw4qifPULEQhA07QPoiiejMfjPfVrtRpTKpXeAcCZsQMQQs6yLPskm83uHyS+urpabjabFzHGb/xA+E6AUlrIZrMHotHB96zVajH5fF7HGKfHBkApXZiamrohiuI+P6KlUqlar9dvI4TuDKsfmoDneWFCSAtjHB4m1vmdEOIpijK0ZyiApmmPeZ6fSyaTvW9eHyrDMOqGYTyXZfnKIPCBAJqmzTIM81GW5V8TL+jK5XKG67onMMZf+vUOA1hKpVJHJye3zBzfHI1Gg9F1fQkAjgUGWFlZmYvH448ymQzv27FH4drammHb9mWM8ateOn0TIIRUJEniI5HIdvwZx3Haz7IMAIJvAErpzUQisSAIwsS23P80r6+v26ZpLgLArX/1uhIoFoucZVnfASA2DvNNjfZTZlk2KUlSo1O3C4BS+kIQhPOJxEgXvy+zaZpMuVx+hhC60BdAVdXj0Wj0rSRJviZe0ITy+bzpOM5pAPi02bslAUrp53Q6PTsxMZaj7+Kzbbv9LJcRQke6AFRVvcRx3P1UKtXzXx90t/3qdV23LMu6OjMz87Rd8zcBQojGsuyORN8J43leyHGcHwAAWwAopYdc1z04rp0OnP+h0LfN8Tz0Z7TTQHsAPwHv3BIw9zTkUQAAAABJRU5ErkJggg=='\n}\n\nexport class Texture {\n  constructor(symbolType) {\n    this.symbolType = symbolType\n  }\n\n  load() {\n    // Load a texture synchronously\n    let image = new Image()\n    image.src = 'data:image/png;base64' + imageData[this.symbolType]\n    let texture = new THREE.Texture(image)\n    texture.needsUpdate = true\n    return texture\n  }\n}\nexport const symbolTypes = Object.keys(imageData)\n\n","import _ from 'underscore'\nimport * as d3 from 'd3'\n/*\n * Utility functions\n */\n\nexport function getCanvasColor(color) {\n  return 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + color.a + ')'\n}\n\nexport const RARE = 'other'\n\nexport function getDataType(value) {\n  let type = typeof value\n  if (type === 'number') {\n    type = 'int'\n    if (!Number.isInteger(value)) {\n      type = 'float'\n    }\n  }\n  return type\n}\n\nexport function orderArray(arr, indices) {\n  // Reorder arr based on indices\n  const orderedArr = new Array(arr.length)\n  for (let i = 0; i < arr.length; i++) {\n    orderedArr[i] = arr[indices[i]]\n  }\n  return orderedArr\n}\n\nexport function encodeRareCategories(arr, k) {\n  // Count occurrences of each unique categories in arr,\n  // then keep top k and encode rare categories as 'rares'\n  let counts = _.countBy(arr)\n  // sort values\n  counts = _.sortBy(_.pairs(counts), tuple => -tuple[1])\n  // get top k frequent categories\n  const frequentCategories = _.map(counts.slice(0, k), tuple => tuple[0])\n  for (let i = 0; i < arr.length; i++) {\n    if (frequentCategories.indexOf(arr[i]) === -1) {\n      arr[i] = RARE\n    }\n  }\n  return arr\n}\n\nexport function binValues(arr, nbins) {\n  // Binning continues array of values in to nbins\n  var extent = d3.extent(arr)\n  var min = parseFloat(extent[0])\n  var max = parseFloat(extent[1])\n  var interval = (max - min) / nbins // bin width\n\n  var domain = _.range(1, nbins).map(function(i) {\n    return i * interval + min\n  }) // bin edges\n  var labels = [min.toFixed(2) + ' to ' + domain[0].toFixed(2)]\n\n  for (var i = 0; i < nbins - 1; i++) {\n    if (i === nbins - 2) {\n      // the last bin\n      var label = domain[i].toFixed(2) + ' to ' + max.toFixed(2)\n    } else {\n      var label = domain[i].toFixed(2) + ' to ' + domain[i + 1].toFixed(2)\n    }\n    labels.push(label)\n  }\n  return {\n    labels: labels,\n    domain: domain,\n    min: min,\n    max: max,\n    interval: interval\n  }\n}\n\nexport function binValues2(arr, domain) {\n  // Binning continues array of values by a given binEdges (domain)\n  // domain: [0.001, 0.01, 0.05, 0.1, 1]\n  // domain should include the largest (rightest) value\n  var extent = d3.extent(arr)\n  var min = parseFloat(extent[0])\n  var max = parseFloat(extent[1])\n\n  var labels = ['0 to ' + domain[0]]\n  var nbins = domain.length\n\n  for (var i = 0; i < nbins - 1; i++) {\n    var label = domain[i] + ' to ' + domain[i + 1]\n    labels.push(label)\n  }\n  return { labels: labels, domain: domain.slice(0, -1), min: min, max: max }\n}\n\nexport function binBy(list, key, nbins) {\n  // similar to _.groupBy but applying to continues values using `binValues`\n  // list: an array of objects\n  // key: name of the continues variable\n  // nbins: number of bins\n  var values = _.pluck(list, key)\n  var binnedValues = binValues(values, nbins)\n  var labels = binnedValues.labels\n  var min = binnedValues.min\n  var interval = binnedValues.interval\n\n  var grouped = _.groupBy(list, function(obj) {\n    var i = Math.floor((obj[key] - min) / interval)\n    if (i === nbins) {\n      // the max value\n      i = nbins - 1\n    }\n    return labels[i]\n  })\n  return grouped\n}\n\nexport function binBy2(list, key, domain) {\n  // wrapper for `binValuesBy`\n  var values = _.pluck(list, key)\n  var binnedValues = binValues2(values, domain)\n  var labels = binnedValues.labels\n\n  var grouped = _.groupBy(list, function(obj) {\n    var i = _.filter(domain, function(edge) {\n      return edge < obj[key]\n    }).length\n    return labels[i]\n  })\n  return grouped\n}\n","import * as d3 from 'd3'\nimport * as d3Scale from 'd3-scale'\nimport _ from 'underscore'\nimport * as utils from './utils'\n\nexport class ScatterDataSubset {\n  // \"model\" for PointsGeometry\n  constructor(data) {\n    this.data = data\n    this.n = data.length\n    const { indices, positions } = this.getIndicesAndPositions(data)\n    this.indices = indices\n    this.positions = positions\n  }\n\n  getIndicesAndPositions(data) {\n    const n = this.n\n    const indices = new Uint32Array(n)\n    const positions = new Float32Array(n * 3)\n    for (let i = 0; i < n; i++) {\n      indices[i] = i\n      positions[(i * 3)] = data[i].x\n      positions[(i * 3) + 1] = data[i].y\n      positions[(i * 3) + 2] = data[i].z || 0\n    }\n    return { indices: indices, positions: positions }\n  }\n\n  getAttr(metaKey) {\n    return this.data.map(record => record[metaKey])\n  }\n}\n\nexport class ScatterData {\n  constructor(data) {\n    this.data = data\n    this.n = data.length\n    this.metas = []\n    this.parse()\n    const { indices, positions } = this.getIndicesAndPositions()\n    this.indices = indices\n    this.positions = positions\n  }\n\n  parse() {\n    // extract the meta data `metas` in the array of object\n    const data = this.data\n    const xyz = ['x', 'y', 'z']\n    for (const key of Object.keys(data[0])) {\n      if (xyz.indexOf(key) === -1) {\n        const values = data.map(o => o[key])\n        const nUnique = [...new Set(values)].length\n        const type = utils.getDataType(data[0][key])\n        this.metas.push({\n          name: key,\n          nUnique: nUnique,\n          type: type\n        })\n      }\n    }\n  }\n\n  getIndicesAndPositions() {\n    const n = this.n\n    const indices = new Uint32Array(n)\n    const positions = new Float32Array(n * 3)\n    for (let i = 0; i < n; i++) {\n      indices[i] = i\n      positions[(i * 3)] = this.data[i].x\n      positions[(i * 3) + 1] = this.data[i].y\n      positions[(i * 3) + 2] = this.data[i].z || 0\n      // add index to the object\n      this.data[i].index = i\n    }\n    return { indices: indices, positions: positions }\n  }\n\n  getLabels(labelKeys) {\n    // return an array of label texts given a list of labelKeys\n    const n = this.n\n    const labels = new Array(n)\n    let i = 0\n    for (const record of this.data) {\n      let label = ''\n      for (const labelKey of labelKeys) {\n        label += labelKey + ': ' + record[labelKey] + ' \\n'\n      }\n      labels[i] = label\n      i++\n    }\n    return labels\n  }\n\n  groupBy(metaKey) {\n    // group by a metaKey and return an object of ScatterDataSubset objects keyed by metaKey\n    const dataSubsets = _.groupBy(this.data, metaKey)\n    const scatterDataSubsets = _.mapObject(dataSubsets, (records, key) => {\n      return new ScatterDataSubset(records)\n    })\n    return scatterDataSubsets\n  }\n\n  binBy(metaKey, nbins) {\n    const dataSubsets = utils.binBy(this.data, metaKey, nbins)\n    const scatterDataSubsets = _.mapObject(dataSubsets, (records, key) => {\n      return new ScatterDataSubset(records)\n    })\n    return scatterDataSubsets\n  }\n\n  binBy2(metaKey, domain) {\n    const dataSubsets = utils.binBy2(this.data, metaKey, domain)\n    const scatterDataSubsets = _.mapObject(dataSubsets, (records, key) => {\n      return new ScatterDataSubset(records)\n    })\n    return scatterDataSubsets\n  }\n\n  getAttr(metaKey) {\n    return this.data.map(record => record[metaKey])\n  }\n\n  setAttr(key, values) {\n    for (let i = 0; i < this.n; i++) {\n      const rec = this.data[i]\n      rec[key] = values[i]\n      this.data[i] = rec\n    }\n    // add meta data of this new attr\n    this.metas.push({\n      name: key,\n      nUnique: [...new Set(values)].length,\n      type: utils.getDataType(values[0])\n    })\n  }\n\n  getColorOptions() {\n    let colorOptions = this.metas.filter(meta => {\n      return meta.nUnique < this.n && meta.nUnique > 1\n    })\n    colorOptions = colorOptions.map(meta => {\n      return { value: meta.name, label: meta.name }\n    })\n    return colorOptions\n  }\n\n  getShapeOptions() {\n    let shapeOptions = this.metas.filter(meta => {\n      return meta.type !== 'float' && (meta.nUnique < 7 && meta.nUnique > 1)\n    })\n    shapeOptions = shapeOptions.map(meta => {\n      return { value: meta.name, label: meta.name }\n    })\n    return shapeOptions\n  }\n\n  getSearchOptions(labelKeys) {\n    // labelKeys: array of strings\n    // return an array of objects as input for Select.options\n    let allLabels = []\n    for (const labelKey of labelKeys) {\n      let labels = this.getAttr(labelKey)\n      // take the unique values\n      labels = [...new Set(labels)]\n      labels = labels.map(x => {\n        return { value: x, label: x, key: labelKey }\n      })\n      labels = { label: labelKey, options: labels }\n      allLabels.push(labels)\n    }\n    return allLabels\n  }\n\n  calculateColorScale(metaKey) {\n    // Color points by a certain metaKey\n    // update colorKey\n    let metas = this.getAttr(metaKey)\n\n    const meta = _.findWhere(this.metas, { name: metaKey })\n    const dtype = meta.type\n\n    if (dtype !== 'float' && dtype !== 'int' && meta.nUnique > 20) {\n      metas = utils.encodeRareCategories(metas, 19)\n    }\n    let uniqueCats = new Set(metas)\n    const nUniqueCats = uniqueCats.size\n    uniqueCats = Array.from(uniqueCats)\n    // Make unknown to be gray\n    if (uniqueCats.indexOf('unknown') !== -1) {\n      if (uniqueCats.length > 7) {\n        const idx = uniqueCats.indexOf('unknown')\n        let greyIdx = 7\n        if (uniqueCats.length === 20) {\n          greyIdx = 15\n        }\n        const elem = uniqueCats[greyIdx]\n        uniqueCats[greyIdx] = 'unknown'\n        uniqueCats[idx] = elem\n      }\n    }\n    // Make RARE to be grey\n    if (uniqueCats.indexOf(utils.RARE) !== -1) {\n      if (uniqueCats.length === 20) {\n        const idx = uniqueCats.indexOf(utils.RARE)\n        let greyIdx2 = 15\n        if (uniqueCats.indexOf('unknown') !== -1) {\n          greyIdx2 = 14\n        }\n        const elem = uniqueCats[greyIdx2]\n        uniqueCats[greyIdx2] = utils.RARE\n        uniqueCats[idx] = elem\n      }\n    }\n\n    // make colorScale\n    let colorExtent = d3.extent(metas)\n    const minScore = colorExtent[0]\n    const maxScore = colorExtent[1]\n    let colorScale = d3Scale\n      .scalePow()\n      .domain([minScore, (minScore + maxScore) / 2, maxScore])\n      .range(['#1f77b4', '#ddd', '#d62728'])\n\n    if (dtype === 'boolean') {\n      colorScale = d3Scale\n        .scaleOrdinal()\n        .domain([true, false])\n        .range(['#cc0000', '#cccccc'])\n    } else if (nUniqueCats < 11) {\n      colorScale = d3Scale.scaleOrdinal(d3.schemeCategory10).domain(uniqueCats)\n    } else if (nUniqueCats > 10 && nUniqueCats <= 20) {\n      colorScale = d3Scale.scaleOrdinal(d3.schemeCategory10).domain(uniqueCats)\n    } else if (nUniqueCats <= 40) {\n      const colors40 = [\n        '#1b70fc',\n        '#faff16',\n        '#d50527',\n        '#158940',\n        '#f898fd',\n        '#24c9d7',\n        '#cb9b64',\n        '#866888',\n        '#22e67a',\n        '#e509ae',\n        '#9dabfa',\n        '#437e8a',\n        '#b21bff',\n        '#ff7b91',\n        '#94aa05',\n        '#ac5906',\n        '#82a68d',\n        '#fe6616',\n        '#7a7352',\n        '#f9bc0f',\n        '#b65d66',\n        '#07a2e6',\n        '#c091ae',\n        '#8a91a7',\n        '#88fc07',\n        '#ea42fe',\n        '#9e8010',\n        '#10b437',\n        '#c281fe',\n        '#f92b75',\n        '#07c99d',\n        '#a946aa',\n        '#bfd544',\n        '#16977e',\n        '#ff6ac8',\n        '#a88178',\n        '#5776a9',\n        '#678007',\n        '#fa9316',\n        '#85c070',\n        '#6aa2a9',\n        '#989e5d',\n        '#fe9169',\n        '#cd714a',\n        '#6ed014',\n        '#c5639c',\n        '#c23271',\n        '#698ffc',\n        '#678275',\n        '#c5a121',\n        '#a978ba',\n        '#ee534e',\n        '#d24506',\n        '#59c3fa',\n        '#ca7b0a',\n        '#6f7385',\n        '#9a634a',\n        '#48aa6f',\n        '#ad9ad0',\n        '#d7908c',\n        '#6a8a53',\n        '#8c46fc',\n        '#8f5ab8',\n        '#fd1105',\n        '#7ea7cf',\n        '#d77cd1',\n        '#a9804b',\n        '#0688b4',\n        '#6a9f3e',\n        '#ee8fba',\n        '#a67389',\n        '#9e8cfe',\n        '#bd443c',\n        '#6d63ff',\n        '#d110d5',\n        '#798cc3',\n        '#df5f83',\n        '#b1b853',\n        '#bb59d8',\n        '#1d960c',\n        '#867ba8',\n        '#18acc9',\n        '#25b3a7',\n        '#f3db1d',\n        '#938c6d',\n        '#936a24',\n        '#a964fb',\n        '#92e460',\n        '#a05787',\n        '#9c87a0',\n        '#20c773',\n        '#8b696d',\n        '#78762d',\n        '#e154c6',\n        '#40835f',\n        '#d73656',\n        '#1afd5c',\n        '#c4f546',\n        '#3d88d8',\n        '#bd3896',\n        '#1397a3',\n        '#f940a5',\n        '#66aeff',\n        '#d097e7',\n        '#fe6ef9',\n        '#d86507',\n        '#8b900a',\n        '#d47270',\n        '#e8ac48',\n        '#cf7c97',\n        '#cebb11',\n        '#718a90',\n        '#e78139',\n        '#ff7463',\n        '#bea1fd'\n      ]\n      colorScale = d3Scale\n        .scaleOrdinal()\n        .range(colors40)\n        .domain(uniqueCats)\n    }\n\n    return colorScale\n  }\n\n  calculateShapeScale(metaKey) {\n    let symbols = d3.symbols.map(t => d3.symbol().type(t)())\n\n    // make shapeScale for d3.legend\n    const meta = _.findWhere(this.metas, { name: metaKey })\n\n    // categorical data\n    // get grouped datasets, each group is going to be a cloud\n    let scatterDataSubsets = this.groupBy(metaKey)\n    let shapeLabels\n    let shapeScale = d3Scale\n      .scaleOrdinal()\n      .domain(Object.keys(scatterDataSubsets))\n      .range(symbols)\n\n    if (['int', 'float'].indexOf(meta.type) !== -1 && meta.nUnique > 6) {\n      // get grouped datasets, each group is going to be a cloud\n      scatterDataSubsets = this.binBy(metaKey, 6)\n      // Make a threshold scale\n      let binnedValues = utils.binValues(_.pluck(this.data, metaKey), 6)\n\n      if (meta.name === 'p-value') {\n        // get grouped datasets, each group is going to be a cloud\n        const pValueDomain = [0.001, 0.01, 0.05, 0.1, 1]\n        scatterDataSubsets = this.binBy2(metaKey, pValueDomain)\n        // Make a threshold scale\n        binnedValues = utils.binValues2(\n          _.pluck(this.data, metaKey),\n          pValueDomain\n        )\n        // overwrite the symbols map to make it having the same length with pValueDomain\n        symbols = _.map(\n          d3.symbols.slice(0, pValueDomain.length),\n          function (t) {\n            return d3.symbol().type(t)()\n          }\n        )\n      }\n\n      shapeScale = d3Scale\n        .scaleThreshold()\n        .domain(binnedValues.domain)\n        .range(symbols)\n      shapeLabels = binnedValues.labels\n    }\n    return {\n      shapeScale: shapeScale,\n      shapeLabels: shapeLabels,\n      scatterDataSubsets: scatterDataSubsets\n    }\n  }\n}\n","/** @license React v16.11.0\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:!0});\nvar b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?Symbol.for(\"react.suspense_list\"):\n60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.fundamental\"):60117,w=b?Symbol.for(\"react.responder\"):60118,x=b?Symbol.for(\"react.scope\"):60119;function y(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case h:return a;default:return u}}case t:case r:case d:return u}}}function z(a){return y(a)===m}\nexports.typeOf=y;exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;exports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===v||a.$$typeof===w||a.$$typeof===x)};exports.isAsyncMode=function(a){return z(a)||y(a)===l};exports.isConcurrentMode=z;exports.isContextConsumer=function(a){return y(a)===k};exports.isContextProvider=function(a){return y(a)===h};\nexports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return y(a)===n};exports.isFragment=function(a){return y(a)===e};exports.isLazy=function(a){return y(a)===t};exports.isMemo=function(a){return y(a)===r};exports.isPortal=function(a){return y(a)===d};exports.isProfiler=function(a){return y(a)===g};exports.isStrictMode=function(a){return y(a)===f};exports.isSuspense=function(a){return y(a)===p};\n","/** @license React v16.11.0\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE);\n}\n\n/**\n * Forked from fbjs/warning:\n * https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/__forks__/warning.js\n *\n * Only change is we use console.warn instead of console.error,\n * and do nothing when 'console' is not supported.\n * This really simplifies the code.\n * ---\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\nvar lowPriorityWarningWithoutStack = function () {};\n\n{\n  var printWarning = function (format) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n\n    if (typeof console !== 'undefined') {\n      console.warn(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n\n  lowPriorityWarningWithoutStack = function (condition, format) {\n    if (format === undefined) {\n      throw new Error('`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n\n    if (!condition) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      printWarning.apply(void 0, [format].concat(args));\n    }\n  };\n}\n\nvar lowPriorityWarningWithoutStack$1 = lowPriorityWarningWithoutStack;\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_LAZY_TYPE:\n      case REACT_MEMO_TYPE:\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true;\n      lowPriorityWarningWithoutStack$1(false, 'The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.typeOf = typeOf;\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isValidElementType = isValidElementType;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar has = Function.call.bind(Object.prototype.hasOwnProperty);\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import React from 'react'\nimport * as THREE from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\nimport { BufferGeometryUtils } from 'three/examples/jsm/utils/BufferGeometryUtils.js'\nimport _ from 'underscore'\nimport { Texture, symbolTypes } from './texture'\nimport * as utils from './utils'\nimport { ScatterData, ScatterDataSubset } from './ScatterData.js'\nimport PropTypes from 'prop-types'\n\nclass PointsGeometry {\n  constructor(args) {\n    this.model = args.model\n    this.geometry = null\n\n    this.createGeometry()\n  }\n\n  createGeometry() {\n    const geometry = new THREE.BufferGeometry()\n\n    const model = this.model\n\n    geometry.setIndex(new THREE.BufferAttribute(model.indices, 1))\n    geometry.addAttribute(\n      'position',\n      new THREE.BufferAttribute(model.positions, 3)\n    )\n    // this is used for tracking the original orders of the data objects in the entire ScatterData\n    geometry.userData = { index: model.getAttr('index') }\n\n    geometry.computeBoundingSphere()\n\n    this.geometry = geometry\n  }\n}\n\n/**\n * The 3d canvas view underyling the scatterBoard\n */\nexport class Scatter3dView extends React.Component {\n  constructor(props) {\n    super(props)\n    const is3d = this.props.is3d\n    this.state = {\n      isLoading: false,\n      isLoaded: false,\n      url: this.props.url,\n      data: this.props.data,\n      model: null,\n      WIDTH: this.props.width || 1400,\n      HEIGHT: this.props.height || 800,\n      DPR: this.props.DPR || 2,\n      labelKeys: this.props.labelKeys, // which metaKey to use as labels\n      colorKey: this.props.colorKey, // which metaKey to use as colors\n      shapeKey: this.props.shapeKey,\n      pointSize: is3d ? 0.5 : 12, // the size of the points\n      is3d: is3d, // 3d or 2d\n      colorScale: this.props.colorScale,\n      shapeScale: this.props.shapeScale,\n      shapeLabels: this.props.shapeLabels\n    }\n    // events\n    this.onMouseMove = this.onMouseMove.bind(this)\n    this.onMouseDown = this.onMouseDown.bind(this)\n    this.onMouseUp = this.onMouseUp.bind(this)\n  }\n\n  componentDidMount() {\n    // fetch data from url\n    if (this.props.url) {\n      // url is given\n      this.setState({ isLoading: true })\n      fetch(this.props.url)\n        .then(response => {\n          if (response.ok) {\n            return response.json()\n          } else {\n            throw new Error('Something went wrong when fetching data ...')\n          }\n        })\n        .then(data => {\n          this.setState({\n            data: data,\n            model: new ScatterData(data), // init model\n            isLoading: false,\n            isLoaded: true\n          })\n          this.makeMaterial()\n          this.setUpStage()\n          this.shapeBy(this.state.shapeKey)\n        })\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (!this.props.url) {\n      // only trigger rendering when url is not set directly to prop\n      // data is set via parent compoent\n      if (\n        prevState.data === null &&\n        prevProps.data === null &&\n        this.props.data !== null &&\n        this.state.data === null\n      ) {\n        this.makeMaterial()\n        this.setUpStage()\n      } else if (this.props.data !== null && this.props.shapeScale !== null) {\n        this.shapeBy(this.props.shapeKey) // will update state shapeScale etc.\n        this.startAnimate()\n      } else if (this.props.colorKey !== prevProps.colorKey) {\n        // colorKey changed through parent state passed as prop\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.animateId) {\n      this.stopAnimate()\n    }\n  }\n\n  render() {\n    return (\n      <div\n        ref={ref => (this.mount = ref)}\n        onMouseDown={e => this.onMouseDown(e)}\n        onMouseMove={e => this.onMouseMove(e)}\n        onMouseUp={e => this.onMouseUp(e)}\n      />\n    )\n  }\n\n  setUpStage() {\n    // set up THREE.js visualization components\n    const { WIDTH, HEIGHT, DPR } = this.state\n    const aspectRatio = WIDTH / HEIGHT\n\n    // set up scene, camera, renderer\n    const scene = new THREE.Scene()\n    // set the id for this object\n    this.id = scene.uuid\n\n    const renderer = new THREE.WebGLRenderer()\n    renderer.setClearColor(0xffffff)\n    renderer.setPixelRatio(DPR)\n    renderer.setSize(WIDTH, HEIGHT)\n\n    // 2d\n    const ORTHO_CAMERA_FRUSTUM_HALF_EXTENT = 10.5\n    let left = -ORTHO_CAMERA_FRUSTUM_HALF_EXTENT\n    let right = ORTHO_CAMERA_FRUSTUM_HALF_EXTENT\n    let bottom = -ORTHO_CAMERA_FRUSTUM_HALF_EXTENT\n    let top = ORTHO_CAMERA_FRUSTUM_HALF_EXTENT\n    // Scale up the larger of (w, h) to match the aspect ratio.\n    if (aspectRatio > 1) {\n      left *= aspectRatio\n      right *= aspectRatio\n    } else {\n      top /= aspectRatio\n      bottom /= aspectRatio\n    }\n    let camera = new THREE.OrthographicCamera(\n      left,\n      right,\n      top,\n      bottom,\n      -1000,\n      1000\n    )\n    if (this.state.is3d) {\n      camera = new THREE.PerspectiveCamera(70, aspectRatio, 0.01, 1000000)\n      camera.position.z = 30\n    }\n\n    // Put the renderer's DOM into the container\n    renderer.domElement.id = 'renderer-' + this.id\n    this.mount.appendChild(renderer.domElement)\n\n    // set up orbit controls\n    const controls = new OrbitControls(camera, renderer.domElement)\n\n    controls.enableZoom = true\n    controls.enableDamping = true\n    controls.dampingFactor = 0.25\n    controls.screenSpacePanning = true\n\n    if (!this.state.is3d) {\n      controls.enableRotate = false\n      controls.mouseButtons = {\n        LEFT: THREE.MOUSE.RIGHT,\n        MIDDLE: THREE.MOUSE.DOLLY,\n        RIGHT: THREE.MOUSE.LEFT\n      }\n    } else {\n      controls.autoRotate = true\n      controls.autoRotateSpeed = 2.0\n    }\n\n    controls.addEventListener('start', function () {\n      controls.autoRotate = false\n    })\n\n    const mouse = new THREE.Vector2()\n\n    // bind three js objects to component\n    this.scene = scene\n    this.renderer = renderer\n    this.camera = camera\n    this.controls = controls\n    this.mouse = mouse\n    this.updated = true\n  }\n\n  onMouseDown(e) {\n    this.mouseMoved = false\n  }\n\n  onMouseMove(e) {\n    const mouse = this.mouse\n    const { WIDTH, HEIGHT } = this.state\n    mouse.x = (e.nativeEvent.offsetX / WIDTH) * 2 - 1\n    mouse.y = -(e.nativeEvent.offsetY / HEIGHT) * 2 + 1\n    this.mouse = mouse\n    this.updated = true\n    this.mouseMoved = true\n  }\n\n  onMouseUp(evt) {\n    if (this.mouseMoved) return\n    if (typeof this.props.onClick === 'function') {\n      const trueIdx = this.points.geometry.userData.index[this.getPoint()]\n      const datum = this.props.model.data[trueIdx]\n      this.props.onClick(evt, datum)\n    }\n  }\n\n  makeMaterial() {\n    const materials = []\n    for (const symbolType of symbolTypes) {\n      const textureResult = new Texture(symbolType).load()\n\n      const material = new THREE.PointsMaterial({\n        vertexColors: THREE.VertexColors,\n        size: this.state.pointSize,\n        sizeAttenuation: this.state.is3d,\n        map: textureResult,\n        alphaTest: 0.2,\n        transparent: true,\n        opacity: 0.6\n      })\n      materials.push(material)\n    }\n\n    this.materials = materials\n  }\n\n  clearScene() {\n    const scene = this.scene\n    for (const child of scene.children) {\n      scene.remove(child)\n    }\n  }\n\n  shapeBy(metaKey) {\n    const model = this.props.model\n    const scene = this.scene\n    const { scatterDataSubsets } = model.calculateShapeScale(metaKey)\n\n    // Update geometry by merging individual genmetries from each group\n    const geometries = []\n    for (const key of Object.keys(scatterDataSubsets)) {\n      const geometry = new PointsGeometry({\n        model: scatterDataSubsets[key]\n      })\n      geometries.push(geometry.geometry)\n    }\n    const mergedGeometry = BufferGeometryUtils.mergeBufferGeometries(geometries)\n    // concat all indices from each geometry\n    const arrayOfIndices = geometries.map(g => g.userData.index)\n    const indices = arrayOfIndices.reduce((arr1, arr2) => {\n      return arr1.concat(arr2)\n    })\n    let labels = model.getLabels(this.state.labelKeys)\n    labels = utils.orderArray(labels, indices)\n\n    mergedGeometry.userData = { index: indices, labels: labels }\n    const groupSizes = geometries.map(g => g.index.count)\n    // to keep track of the cumulative sums of the group sizes, prepended by -1\n    const cumsums = groupSizes.reduce(\n      (a, x, i) => [...a, x + (a[i - 1] || 0)],\n      []\n    )\n    cumsums.unshift(-1)\n\n    for (let i = 0; i < geometries.length; i++) {\n      mergedGeometry.addGroup(cumsums[i] + 1, groupSizes[i], i)\n    }\n\n    const points = new THREE.Points(mergedGeometry, this.materials)\n    // clear clouds\n    this.clearScene()\n    scene.add(points)\n    this.points = points\n\n    // set colors\n    this.setColors(this.props.colorScale, this.props.colorKey)\n  }\n\n  renderScatter() {\n    const { camera, renderer, scene } = this\n\n    const closestPoint = this.getPoint()\n    // reset colors\n    this.resetColors()\n    // remove text-label if exists\n    const textLabel = document.getElementById('text-label-' + this.id)\n    if (textLabel) {\n      textLabel.remove()\n    }\n\n    // add interactivities if there is intesecting points\n    if (closestPoint !== undefined) {\n      // change color of the point\n      this.points.geometry.attributes.color.needsUpdate = true\n\n      this.points.geometry.attributes.color.array[closestPoint * 3] = 0.1\n      this.points.geometry.attributes.color.array[closestPoint * 3 + 1] = 0.8\n      this.points.geometry.attributes.color.array[closestPoint * 3 + 2] = 0.1\n\n      // find the position of the point\n      const pointPosition = {\n        x: this.points.geometry.attributes.position.array[closestPoint * 3],\n        y: this.points.geometry.attributes.position.array[closestPoint * 3 + 1],\n        z: this.points.geometry.attributes.position.array[closestPoint * 3 + 2]\n      }\n      // add text canvas\n      const textCanvas = this.makeTextCanvas(\n        this.points.geometry.userData.labels[closestPoint],\n        pointPosition.x,\n        pointPosition.y,\n        pointPosition.z,\n        this.points.rotation,\n        {\n          fontsize: 24,\n          fontface: 'arial, sans-serif',\n          textColor: { r: 0, g: 0, b: 0, a: 0.8 }\n        }\n      )\n\n      textCanvas.id = 'text-label-' + this.id\n      this.mount.appendChild(textCanvas)\n\n      if (typeof this.props.onMouseOver === 'function') {\n        const trueIdx = this.points.geometry.userData.index[closestPoint]\n        const datum = this.props.model.data[trueIdx]\n        this.props.onMouseOver(datum)\n      }\n    }\n  }\n\n  makeTextCanvas(message, x, y, z, euler, parameters) {\n    if (parameters === undefined) parameters = {}\n    const fontface = parameters.hasOwnProperty('fontface')\n      ? parameters['fontface']\n      : 'arial, sans-serif'\n    const fontsize = parameters.hasOwnProperty('fontsize')\n      ? parameters['fontsize']\n      : 18\n    const textColor = parameters.hasOwnProperty('textColor')\n      ? parameters['textColor']\n      : { r: 0, g: 0, b: 255, a: 0.8 }\n    const lineHeight = parameters.hasOwnProperty('lineHeight')\n      ? parameters['lineHeight']\n      : 20\n\n    const canvas = document.createElement('canvas')\n    const context = canvas.getContext('2d')\n\n    const { WIDTH, HEIGHT } = this.state\n    canvas.width = WIDTH\n    canvas.height = HEIGHT\n\n    context.font = fontsize + 'px ' + fontface\n    context.textBaseline = 'alphabetic'\n\n    context.textAlign = 'left'\n\n    // text color.  Note that we have to do this AFTER the round-rect as it also uses the \"fillstyle\" of the canvas\n    context.fillStyle = utils.getCanvasColor(textColor)\n\n    // calculate the project of 3d point into 2d plain\n    const point = new THREE.Vector3(x, y, z).applyEuler(euler)\n    const pv = new THREE.Vector3().copy(point).project(this.camera)\n    const coords = {\n      x: ((pv.x + 1) / 2) * WIDTH, // * this.DPR,\n      y: -(((pv.y - 1) / 2) * HEIGHT) // * this.DPR\n    }\n    // draw the text (in multiple lines)\n    const lines = message.split('\\n')\n    for (let i = 0; i < lines.length; i++) {\n      context.fillText(lines[i], coords.x, coords.y + i * lineHeight)\n    }\n\n    // styles of canvas element\n    canvas.style.left = 0\n    canvas.style.top = 0\n    canvas.style.position = 'absolute'\n    canvas.style.pointerEvents = 'none'\n\n    return canvas\n  }\n\n  resetColors() {\n    this.setColors(this.props.colorScale, this.props.colorKey)\n  }\n\n  setColors(colorScale, metaKey) {\n    // Color points by a certain metaKey given colorScale\n    const model = this.props.model\n    let metas = model.getAttr(metaKey)\n    const geometry = this.points.geometry\n    const idx = geometry.userData.index\n    metas = utils.orderArray(metas, idx)\n\n    const meta = _.findWhere(model.metas, { name: metaKey })\n    const dtype = meta.type\n    if (dtype !== 'float' && dtype !== 'int' && meta.nUnique > 20) {\n      metas = utils.encodeRareCategories(metas, 19)\n    }\n\n    // construct colors BufferAttribute\n    const colors = new Float32Array(model.n * 3)\n    let frequentCategories = { length: 2 }\n    if (colorScale.hasOwnProperty('domain')) {\n      frequentCategories = colorScale.domain().slice()\n    }\n\n    for (let i = metas.length - 1; i >= 0; i--) {\n      let color = colorScale(metas[i])\n      color = new THREE.Color(color)\n      color.toArray(colors, i * 3)\n    }\n\n    if (frequentCategories.length > 3) {\n      for (let i = metas.length - 1; i >= 0; i--) {\n        let color = colorScale(metas[i])\n        if (frequentCategories.indexOf(metas[i]) === -1) {\n          color = colorScale(utils.RARE)\n        }\n        color = new THREE.Color(color)\n        color.toArray(colors, i * 3)\n      }\n    }\n    geometry.addAttribute('color', new THREE.BufferAttribute(colors.slice(), 3))\n  }\n\n  startAnimate() {\n    if (!this.animateId) {\n      this.animate()\n    }\n  }\n  animate() {\n    const { renderer, scene, camera } = this\n    this.controls.update()\n    if (this.updated) {\n      this.renderScatter()\n      this.updated = false\n    }\n    renderer.render(scene, camera)\n    this.animateId = window.requestAnimationFrame(() => this.animate())\n  }\n\n  stopAnimate() {\n    window.cancelAnimationFrame(this.animateId)\n  }\n\n  highlightQuery(metaKey, query) {\n    // To highlight a query result by adding a new PointsGeometry\n    // instance to the scene\n    this.removeHighlightedPoints()\n    // get the reordered data in geometry\n    const reorderedData = utils.orderArray(\n      this.props.model.data,\n      this.points.geometry.userData.index\n    )\n    // find the matched data points\n    const matchedData = reorderedData.filter(rec => {\n      return rec[metaKey] === query\n    })\n    const dataSubset = new ScatterDataSubset(matchedData)\n    const highlightCould = this.createHighlightCloud(dataSubset)\n    highlightCould.name = 'highlight-' + this.id\n    this.scene.add(highlightCould)\n  }\n\n  createHighlightCloud(dataSubset) {\n    // dataSubset should be a ScatterDataSubset instance\n    const geometryHighlight = new PointsGeometry({ model: dataSubset })\n    const material = new THREE.PointsMaterial({\n      size: this.state.pointSize * 5,\n      sizeAttenuation: this.state.is3d,\n      map: this.materials[0].map,\n      transparent: true,\n      opacity: 0.4,\n      color: 0xffff00\n    })\n\n    const highlightPoints = new THREE.Points(\n      geometryHighlight.geometry,\n      material\n    )\n    // update rotation\n    highlightPoints.rotation.x = this.points.rotation.x\n    highlightPoints.rotation.y = this.points.rotation.y\n    return highlightPoints\n  }\n\n  removeHighlightedPoints() {\n    const scene = this.scene\n    scene.remove(scene.getObjectByName('highlight-' + this.id))\n  }\n\n  getPoint() {\n    const { mouse, camera } = this\n\n    let closestPoint = undefined\n    let closestDist = undefined\n    let point3 = new THREE.Vector3()\n    let point2 = new THREE.Vector2()\n\n    for (const pointIndex of this.points.geometry.index.array) {\n      point3.set(\n        this.points.geometry.attributes.position.array[pointIndex * 3],\n        this.points.geometry.attributes.position.array[pointIndex * 3 + 1],\n        this.points.geometry.attributes.position.array[pointIndex * 3 + 2]\n      )\n      point3.project(camera)\n      point2.set(point3.x, point3.y)\n      const dist = point2.distanceToSquared(mouse)\n      if (dist < Math.min(1.0, 1 / (camera.zoom * camera.zoom)) && (closestDist === undefined || dist < closestDist)) {\n        closestPoint = pointIndex\n        closestDist = dist\n      }\n    }\n    return closestPoint\n  }\n}\n\nScatter3dView.propTypes = {\n  /**\n   * ([{x: 0, y: 0, z: 0, ...}]): the json formatted data \n   */\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired,\n      z: PropTypes.number,\n    })\n  ),\n  /**\n   * ScatterData(data)\n   */\n  model: PropTypes.any,\n  /**\n   * (_number_): the width of the component in pixels. Default: 1400.\n   */\n  width: PropTypes.number,\n  /**\n   * (_number_): the height of the component in pixels. Default: 800.\n   */\n  height: PropTypes.number,\n  /**\n   * (_number_): the device pixel ratio (window.devicePixelRatio)\n   */\n  DPR: PropTypes.number,\n  /**\n   * (_string_): the key to color the dots by default.\n   */\n  colorKey: PropTypes.string,\n  /**\n   * (_string_): the key to shape the dots by default.\n   */\n  shapeKey: PropTypes.string,\n  /**\n   * (_Array_ of strings): the ordered list of keys of attributes to display for the dots when mouse hovers.\n   */\n  labelKeys: PropTypes.arrayOf(PropTypes.string),\n  /**\n   * (d3-color-scale): Color scale\n   */\n  colorScale: PropTypes.any,\n  /**\n   * (d3-color-scale): Color scale\n   */\n  shapeScale: PropTypes.any,\n  /**\n   * (d3-color-scale): Color scale\n   */\n  shapeLabels: PropTypes.any,\n  /**\n   * (_boolean_): should the scatter plot in 3-D (true) or 2-D (false).\n   */\n  is3d: PropTypes.bool,\n  /**\n   * (_function_): a callback function handling when user click a data point. The input of the function is mouse event and the datum object being clicked.\n   */\n  onClick: PropTypes.func,\n  /**\n   * (_function_): a callback function handling when user hovers over a data point. The input of the function is the datum object being clicked.\n   */\n  onMouseOver: PropTypes.func,\n\n  /// DASH\n\n  /**\n   * The ID used to identify this component in Dash callbacks.\n   */\n  id: PropTypes.string,\n  /**\n   * Dash-assigned callback that should be called to report property changes\n   * to Dash, to make them available for callbacks.\n   */\n  setProps: PropTypes.func,\n}\n","/*\nThe widgets for the interactive scatter plot.\n*/\nimport React from 'react'\nimport * as d3 from 'd3'\nimport legend from 'd3-svg-legend'\nimport Select from 'react-select'\n\nexport class Legend extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      width: this.props.width || 300,\n      height: this.props.height || 800\n    }\n  }\n\n  componentDidMount() {\n    this.setUpDOMs()\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevProps.colorScale !== this.props.colorScale) {\n      this.displayColorLegend(this.props.colorScale, this.props.colorKey)\n    }\n    if (prevProps.shapeScale !== this.props.shapeScale) {\n      this.displayShapeLegend(\n        this.props.shapeScale,\n        this.props.shapeKey,\n        this.props.shapeLabels\n      )\n    }\n  }\n\n  render() {\n    return (\n      <div\n        ref={ref => (this.mount = ref)}\n        // onMouseMove={e => this.handleMouseMove(e)}\n      />\n    )\n  }\n\n  setUpDOMs() {\n    // set up DOMs for the legends\n    const { width, height } = this.state\n    this.el = d3\n      .select(this.mount)\n      .append('svg')\n      .attr('id', 'legend')\n      .attr('width', width)\n      .attr('height', height)\n\n    this.g = this.el\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', 'translate(10, 20)')\n    this.g\n      .append('g')\n      .attr('id', 'legendShape')\n      .attr('class', 'legendPanel')\n      .attr('transform', 'translate(0, 0)')\n    this.g\n      .append('g')\n      .attr('id', 'legendColor')\n      .attr('class', 'legendPanel')\n      .attr('transform', 'translate(110, 0)')\n\n    // styles\n    this.mount.style.position = 'absolute'\n    this.mount.style.zIndex = 10\n    this.mount.style.overflow = 'visible'\n    this.mount.style.left = 0\n    this.mount.style.top = 0\n    this.mount.style.pointerEvents = 'none'\n  }\n\n  displayShapeLegend(shapeScale, shapeKey, shapeLabels) {\n    const legendShape = legend\n      .legendSymbol()\n      .scale(shapeScale)\n      .orient('vertical')\n      .title(shapeKey)\n    if (shapeLabels) {\n      legendShape.labels(shapeLabels)\n    }\n    this.g.select('#legendShape').call(legendShape)\n  }\n\n  displayColorLegend(colorScale, colorKey) {\n    const legendColor = legend\n      .legendColor()\n      .title(colorKey)\n      .shapeWidth(20)\n      .cells(5)\n      .labelFormat(d3.format('.2f'))\n      .scale(colorScale)\n\n    this.g.select('#legendColor').call(legendColor)\n  }\n}\n\nexport class SelectDropdown extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      label: this.props.label,\n      options: null,\n      defaultValue: this.props.defaultValue\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  render() {\n    return (\n      <div ref={ref => (this.mount = ref)}>\n        <label>{this.props.label}</label>\n        <Select\n          defaultValue={this.state.defaultValue}\n          options={this.props.options}\n          onChange={this.handleChange}\n          styles={{\n            container: () => ({\n              width: this.props.width\n            })\n          }}\n        />\n      </div>\n    )\n  }\n\n  handleChange(value) {\n    this.props.onSelectChange(value)\n  }\n}\n\nexport class SearchSelectize extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      searchStr: '',\n      searched: false\n    }\n    this.handleChange = this.handleChange.bind(this)\n    this.handleClear = this.handleClear.bind(this)\n  }\n\n  render() {\n    const searched = this.state.searched\n    return (\n      <div ref={ref => (this.mount = ref)}>\n        <label>{this.props.label}</label>\n        <Select\n          defaultValue=''\n          defaultInputValue=''\n          placeholder='Type to search...'\n          options={this.props.options}\n          onChange={this.handleChange}\n          styles={{\n            container: () => ({\n              width: this.props.width\n            })\n          }}\n        />\n        {searched && (\n          <button\n            onClick={this.handleClear}\n            className='btn btn-sm btn-outline-secondary'\n            style={{ marginTop: 5 }}\n          >\n            Clear highlighted points\n          </button>\n        )}\n      </div>\n    )\n  }\n\n  handleChange(value) {\n    this.setState({ searched: true })\n    this.props.onInputChange(value)\n  }\n\n  handleClear() {\n    this.setState({ searched: false })\n    this.props.onClearBtnClicked()\n  }\n}\n","import React from 'react'\nimport { Scatter3dView } from './ScatterPlot.jsx'\nimport { ScatterData } from './ScatterData.js'\nimport * as scatterWidgets from './ScatterWidgets.jsx'\nimport PropTypes from 'prop-types'\n\n/**\n * A React implementation of THREE.js 2d/3d scatter plot.\n */\nexport class ScatterBoard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      data: null,\n      model: null,\n      colorScale: null,\n      shapeScale: null,\n      shapeLabels: null,\n      colorKey: this.props.colorKey,\n      shapeKey: this.props.shapeKey,\n      labelKeys: this.props.labelKeys,\n      searchKeys: this.props.searchKeys,\n      is3d: this.props.is3d\n    }\n    // events\n    this.handleColorKeyChange = this.handleColorKeyChange.bind(this)\n    this.handleShapeKeyChange = this.handleShapeKeyChange.bind(this)\n    this.handleSearchInputChange = this.handleSearchInputChange.bind(this)\n    this.handleClearBtnClick = this.handleClearBtnClick.bind(this)\n  }\n\n  componentDidMount() {\n    if (this.props.data !== undefined) {\n      this.setState({\n        data: this.props.data,\n        model: new ScatterData(this.props.data),\n      })\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.data !== this.props.data) {\n      if (this.props.data === undefined) {\n        this.setState({\n          data: null,\n          model: null,\n        })\n      } else {\n        this.setState({\n          data: this.props.data,\n          model: new ScatterData(this.props.data),\n        })\n      }\n    }\n  }\n\n  render() {\n    // variables to be passed to children's states\n    const { colorKey, shapeKey, labelKeys, searchKeys, is3d } = this.state\n    const { colorScale, shapeScale, shapeLabels } = this.state\n    const { width, height } = this.props\n    let colorOptions = null\n    let shapeOptions = null\n    let searchOptions = null\n    if (this.state.model) {\n      colorOptions = this.state.model.getColorOptions()\n      shapeOptions = this.state.model.getShapeOptions()\n      if (searchKeys) {\n        searchOptions = this.state.model.getSearchOptions(searchKeys)\n      }\n    }\n    return (\n      <div\n        style={{\n          position: 'relative',\n          padding: 0,\n          width: width,\n          height: height\n        }}\n      >\n        <Scatter3dView\n          data={this.state.data}\n          model={this.state.model}\n          width={width}\n          height={height}\n          DPR={window.devicePixelRatio}\n          colorKey={colorKey}\n          shapeKey={shapeKey}\n          labelKeys={labelKeys}\n          colorScale={colorScale}\n          shapeScale={shapeScale}\n          shapeLabels={shapeScale}\n          is3d={is3d}\n          onClick={this.props.onClick}\n          onMouseOver={this.props.onMouseOver}\n          // create a ref for the parent to refer to the child\n          ref={scatter3dView => {\n            this.scatter3dView = scatter3dView\n          }}\n        />\n        <scatterWidgets.Legend\n          colorScale={colorScale}\n          colorKey={colorKey}\n          shapeScale={shapeScale}\n          shapeKey={shapeKey}\n          shapeLabels={shapeLabels}\n        />\n        <div\n          style={{\n            zIndex: 10,\n            top: 0,\n            right: 0,\n            width: 200,\n            position: 'absolute'\n          }}\n        >\n          {colorOptions && colorOptions.length > 1 && (\n            <scatterWidgets.SelectDropdown\n              label='Color by:'\n              defaultValue={{\n                value: colorKey,\n                label: colorKey\n              }}\n              options={colorOptions}\n              onSelectChange={this.handleColorKeyChange}\n              width={180}\n            />\n          )}\n          {shapeOptions && shapeOptions.length > 1 && (\n            <scatterWidgets.SelectDropdown\n              label='Shape by:'\n              defaultValue={{\n                value: shapeKey,\n                label: shapeKey\n              }}\n              options={shapeOptions}\n              onSelectChange={this.handleShapeKeyChange}\n              width={180}\n            />\n          )}\n          {searchKeys && searchKeys.length > 1 && (\n            <scatterWidgets.SearchSelectize\n              label='Search:'\n              options={searchOptions}\n              onInputChange={this.handleSearchInputChange}\n              onClearBtnClicked={this.handleClearBtnClick}\n              width={180}\n            />\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  handleColorKeyChange(value) {\n    // re-coloring the map when colorKey changed\n    const colorKey = value.value\n    if (colorKey !== this.state.colorKey) {\n      const model = this.state.model\n      const colorScale = model.calculateColorScale(colorKey)\n      this.setState({ colorKey: colorKey, colorScale: colorScale })\n    }\n  }\n\n  handleShapeKeyChange(value) {\n    // re-shaping of the map when shapeKey changed\n    const shapeKey = value.value\n    if (shapeKey !== this.state.shapeKey) {\n      const model = this.state.model\n      const { shapeScale, shapeLabels } = model.calculateShapeScale(shapeKey)\n      this.setState({\n        shapeKey: shapeKey,\n        shapeScale: shapeScale,\n        shapeLabels: shapeLabels\n      })\n    }\n  }\n\n  handleSearchInputChange(valueObj) {\n    // update highlights for new search\n    const { key, value } = valueObj\n    this.scatter3dView.highlightQuery(key, value)\n  }\n\n  handleClearBtnClick() {\n    this.scatter3dView.removeHighlightedPoints()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.data === null && prevState.data !== this.state.data) {\n      // data has been fetched for the first time\n      const { colorKey, shapeKey } = this.state\n      const model = this.state.model\n\n      const colorScale = model.calculateColorScale(colorKey)\n      const { shapeScale, shapeLabels } = model.calculateShapeScale(shapeKey)\n      this.setState({\n        colorScale: colorScale,\n        shapeScale: shapeScale,\n        shapeLabels: shapeLabels\n      })\n    }\n  }\n}\n\nScatterBoard.propTypes = {\n  /**\n   * ([{x: 0, y: 0, z: 0, ...}]): the json formatted data \n   */\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired,\n      z: PropTypes.number,\n    })\n  ),\n  /**\n   * (_string_): the key to shape the dots by default.\n   */\n  shapeKey: PropTypes.string,\n  /**\n   * (_string_): the key to color the dots by default.\n   */\n  colorKey: PropTypes.string,\n  /**\n   * (_Array_ of strings): the ordered list of keys of attributes to display for the dots when mouse hovers.\n   */\n  labelKeys: PropTypes.arrayOf(PropTypes.string),\n  /**\n   * (_Array_ of strings): the list of keys of attributes to enable the search functionality to query against. If not provided, the SearchSelectize component will not be rendered.\n   */\n  searchKeys: PropTypes.arrayOf(PropTypes.string),\n  /**\n   * (_number_): the width of the component in pixels. Default: 1400.\n   */\n  width: PropTypes.number,\n  /**\n   * (_number_): the height of the component in pixels. Default: 800.\n   */\n  height: PropTypes.number,\n  /**\n   * (_boolean_): should the scatter plot in 3-D (true) or 2-D (false).\n   */\n  is3d: PropTypes.bool,\n  /**\n   * (_function_): a callback function handling when user click a data point. The input of the function is mouse event and the datum object being clicked.\n   */\n  onClick: PropTypes.func,\n  /**\n   * (_function_): a callback function handling when user hovers over a data point. The input of the function is the datum object being clicked.\n   */\n  onMouseOver: PropTypes.func,\n\n  /// DASH\n\n  /**\n   * The ID used to identify this component in Dash callbacks.\n   */\n  id: PropTypes.string,\n  /**\n   * Dash-assigned callback that should be called to report property changes\n   * to Dash, to make them available for callbacks.\n   */\n  setProps: PropTypes.func,\n}\n","import React from 'react'\nimport { ScatterBoard } from './ScatterBoard.jsx'\nimport PropTypes from 'prop-types'\n\n/**\n * A Dash-compatible wrapper to the React implementation\n */\nexport class DashScatterBoard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n    this.onClick = this.onClick.bind(this)\n    this.onMouseOver = this.onMouseOver.bind(this)\n  }\n\n  onClick(evt, node) {\n    const { setProps } = this.props\n    if (node !== undefined) {\n      console.log('click')\n      console.log(node)\n      setProps({ clickData: node })\n    }\n  }\n\n  onMouseOver(node) {\n    const { setProps, hoverData } = this.props\n    if (node !== hoverData) {\n      console.log('hover')\n      console.log(node)\n      setProps({ hoverData: node })\n    }\n  }\n\n  render() {\n    const {\n      id,\n      setProps,\n      data,\n      shapeKey,\n      colorKey,\n      labelKeys,\n      searchKeys,\n      width,\n      height,\n      is3d,\n    } = this.props\n    return (\n      <ScatterBoard\n        id={id}\n        data={data}\n        setProps={setProps}\n        shapeKey={shapeKey}\n        colorKey={colorKey}\n        labelKeys={labelKeys}\n        searchKeys={searchKeys}\n        width={width}\n        height={height}\n        is3d={is3d}\n        onClick={this.onClick}\n        onMouseOver={this.onMouseOver}\n      />\n    )\n  }\n}\n\nDashScatterBoard.defaultProps = {\n  clickData: null,\n  hoverData: null,\n}\n\nDashScatterBoard.propTypes = {\n  /**\n   * ([{x: 0, y: 0, z: 0, ...}]): the json formatted data \n   */\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired,\n      z: PropTypes.number,\n    })\n  ),\n  /**\n   * (_string_): the key to shape the dots by default.\n   */\n  shapeKey: PropTypes.string,\n  /**\n   * (_string_): the key to color the dots by default.\n   */\n  colorKey: PropTypes.string,\n  /**\n   * (_Array_ of strings): the ordered list of keys of attributes to display for the dots when mouse hovers.\n   */\n  labelKeys: PropTypes.arrayOf(PropTypes.string),\n  /**\n   * (_Array_ of strings): the list of keys of attributes to enable the search functionality to query against. If not provided, the SearchSelectize component will not be rendered.\n   */\n  searchKeys: PropTypes.arrayOf(PropTypes.string),\n  /**\n   * (_number_): the width of the component in pixels. Default: 1400.\n   */\n  width: PropTypes.number,\n  /**\n   * (_number_): the height of the component in pixels. Default: 800.\n   */\n  height: PropTypes.number,\n  /**\n   * (_boolean_): should the scatter plot in 3-D (true) or 2-D (false).\n   */\n  is3d: PropTypes.bool,\n\n  /// DASH\n\n  /**\n   * The ID used to identify this component in Dash callbacks.\n   */\n  id: PropTypes.string,\n  /**\n   * Dash-assigned callback that should be called to report property changes\n   * to Dash, to make them available for callbacks.\n   */\n  setProps: PropTypes.func,\n  /**\n   * Click data\n   **/\n  clickData: PropTypes.object,\n  /**\n   * Hover data\n   **/\n  hoverData: PropTypes.object,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n/**\n * Lazy react component helper for constructing objects with async render functions\n */\nexport class Lazy extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      children: null\n    }\n  }\n\n  componentDidMount() {\n    if (typeof this.props.children !== 'function') {\n      throw new Error('Lazy component expects an asynchronous function body')\n    }\n    this.props.children().then(\n      (children) => this.setState(\n        () => ({ children })\n      )\n    )\n  }\n\n  render() {\n    if (this.state.children !== null) {\n      return this.state.children\n    } else if (this.props.loading === undefined) {\n      return null\n    } else if (typeof this.props.loading === 'function') {\n      return this.props.loading()\n    } else { // assuming this is valid rendered react DOM tree\n      return this.props.loading\n    }\n  }\n}\n\nLazy.propTypes = {\n  /**\n   * A function returning a promise that resolves to a react element\n   */\n  children: PropTypes.func,\n  /**\n   * Loading indicator (node or react component)\n   */\n  loading: PropTypes.oneOfType([\n    PropTypes.element, PropTypes.elementType\n  ]),\n}\n"],"names":["const","imageData","circle","cross","diamond","square","Texture","constructor","symbolType","load","image","Image","src","this","texture","THREE","needsUpdate","symbolTypes","Object","keys","RARE","getDataType","value","type","Number","isInteger","orderArray","arr","indices","orderedArr","Array","length","i","encodeRareCategories","k","counts","_","countBy","sortBy","pairs","tuple","frequentCategories","map","slice","indexOf","binValues","nbins","extent","d3","min","parseFloat","max","interval","domain","range","labels","toFixed","label","push","binValues2","ScatterDataSubset","data","n","getIndicesAndPositions","positions","Uint32Array","Float32Array","x","y","z","getAttr","metaKey","record","ScatterData","metas","parse","xyz","key","values","o","nUnique","Set","utils","name","index","getLabels","labelKeys","labelKey","groupBy","dataSubsets","mapObject","records","binBy","list","binnedValues","pluck","obj","Math","floor","binBy2","filter","edge","setAttr","let","rec","getColorOptions","meta","getShapeOptions","getSearchOptions","allLabels","options","calculateColorScale","findWhere","dtype","uniqueCats","nUniqueCats","size","from","idx","greyIdx","elem","greyIdx2","colorExtent","minScore","maxScore","colorScale","d3Scale","calculateShapeScale","shapeLabels","symbols","t","scatterDataSubsets","shapeScale","pValueDomain","defineProperty","exports","b","Symbol","for","c","d","e","f","g","h","l","m","p","q","r","v","w","a","u","$$typeof","process","env","NODE_ENV","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","typeOf","object","$$typeofType","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isConcurrentMode","condition","format","undefined","Error","_len2","arguments","args","_key2","_len","_key","argIndex","message","replace","console","warn","apply","concat","lowPriorityWarningWithoutStack$1","module","require$$0","require$$1","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","join","test3","split","forEach","letter","err","shouldUseNative","target","source","to","val","TypeError","toObject","s","call","printWarning","ReactPropTypesSecret","loggedTypeFailures","has","Function","bind","text","error","checkPropTypes","typeSpecs","location","componentName","getStack","typeSpecName","ex","stack","resetWarningCache","emptyFunctionThatReturnsNull","emptyFunction","emptyFunctionWithReset","isValidElement","throwOnDirectAccess","ITERATOR_SYMBOL","iterator","FAUX_ITERATOR_SYMBOL","ANONYMOUS","ReactPropTypes","array","createPrimitiveTypeChecker","bool","func","number","string","symbol","any","createChainableTypeChecker","arrayOf","typeChecker","props","propName","propFullName","PropTypeError","propValue","isArray","getPropType","element","elementType","ReactIs","isValidElementType","instanceOf","expectedClass","node","isNode","objectOf","propType","oneOf","expectedValues","valuesString","JSON","stringify","getPreciseType","oneOfType","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","shape","shapeTypes","exact","allKeys","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","secret","cacheKey","chainedCheckType","expectedType","every","iteratorFn","maybeIterable","getIteratorFn","step","entries","next","done","entry","RegExp","isSymbol","Date","PropTypes","isElement","shim","getShim","require$$2","PointsGeometry","model","geometry","createGeometry","setIndex","addAttribute","userData","computeBoundingSphere","Scatter3dView","is3d","state","isLoading","isLoaded","url","WIDTH","width","HEIGHT","height","DPR","colorKey","shapeKey","pointSize","onMouseMove","onMouseDown","onMouseUp","componentDidMount","setState","fetch","then","response","ok","json","makeMaterial","setUpStage","shapeBy","componentDidUpdate","prevProps","prevState","snapshot","startAnimate","componentWillUnmount","animateId","stopAnimate","render","React","ref","mount","aspectRatio","scene","id","uuid","renderer","setClearColor","setPixelRatio","setSize","left","right","bottom","top","camera","position","domElement","appendChild","controls","OrbitControls","enableZoom","enableDamping","dampingFactor","screenSpacePanning","autoRotate","autoRotateSpeed","enableRotate","mouseButtons","LEFT","RIGHT","MIDDLE","DOLLY","addEventListener","mouse","updated","mouseMoved","nativeEvent","offsetX","offsetY","evt","onClick","trueIdx","points","getPoint","materials","textureResult","material","vertexColors","sizeAttenuation","alphaTest","transparent","opacity","clearScene","children","remove","geometries","mergedGeometry","BufferGeometryUtils","mergeBufferGeometries","reduce","arr1","arr2","groupSizes","count","cumsums","unshift","addGroup","add","setColors","renderScatter","closestPoint","resetColors","textLabel","document","getElementById","attributes","color","pointPosition","textCanvas","makeTextCanvas","rotation","fontsize","fontface","textColor","onMouseOver","euler","parameters","lineHeight","canvas","createElement","context","getContext","font","textBaseline","textAlign","fillStyle","point","applyEuler","pv","copy","project","coords","lines","fillText","style","pointerEvents","colors","toArray","animate","update","window","requestAnimationFrame","cancelAnimationFrame","highlightQuery","query","removeHighlightedPoints","matchedData","dataSubset","highlightCould","createHighlightCloud","geometryHighlight","highlightPoints","getObjectByName","closestDist","point3","point2","pointIndex","set","dist","distanceToSquared","zoom","Component","propTypes","setProps","Legend","setUpDOMs","displayColorLegend","displayShapeLegend","el","append","attr","zIndex","overflow","legendShape","legend","legendSymbol","scale","orient","title","select","legendColor","shapeWidth","cells","labelFormat","SelectDropdown","defaultValue","handleChange","Select","onChange","styles","container","onSelectChange","SearchSelectize","searchStr","searched","handleClear","defaultInputValue","placeholder","className","marginTop","onInputChange","onClearBtnClicked","ScatterBoard","searchKeys","handleColorKeyChange","handleShapeKeyChange","handleSearchInputChange","handleClearBtnClick","colorOptions","shapeOptions","searchOptions","padding","devicePixelRatio","scatter3dView","scatterWidgets.Legend","scatterWidgets.SelectDropdown","scatterWidgets.SearchSelectize","valueObj","DashScatterBoard","log","clickData","hoverData","defaultProps","loading"],"mappings":"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"}